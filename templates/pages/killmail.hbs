<div class="killmail-header">
    <h1>Killmail #{{killmail.id}}</h1>
    <div class="killmail-meta">
        <span class="timestamp">{{formatDate killmail.timestamp}}</span> ‚Ä¢
        <span class="location">{{killmail.victim.location.system}}, {{killmail.victim.location.region}}</span>
    </div>
</div>

<div class="killmail-grid">
    <!-- Victim Information -->
    <div class="card victim-card">
        <h3>üíÄ Victim</h3>
        <div class="pilot-info">
            <h4 class="character-name">{{killmail.victim.character.name}}</h4>
            <p class="corporation-name">{{killmail.victim.character.corporation}}</p>

            <div class="ship-info">
                <h5>Ship Lost:</h5>
                <p class="ship-name">{{killmail.victim.ship.name}}</p>
            </div>

            <div class="loss-value">
                <h5>Total Loss:</h5>
                <p class="isk-value">{{formatISK killmail.value}}</p>
            </div>
        </div>
    </div>

    <!-- Attackers Information -->
    <div class="card attackers-card">
        <h3>‚öîÔ∏è Attackers ({{killmail.attackers.length}})</h3>
        <div class="attackers-list">
            {{#each killmail.attackers}}
            <div class="attacker-item {{#if finalBlow}}final-blow{{/if}}">
                <div class="attacker-info">
                    <span class="character-name">{{character.name}}</span>
                    <span class="corporation-name">({{character.corporation}})</span>
                    {{#if finalBlow}}
                    <span class="final-blow-badge">üí• Final Blow</span>
                    {{/if}}
                </div>
                <div class="attacker-ship">
                    <span class="ship-name">{{ship.name}}</span>
                </div>
            </div>
            {{/each}}
        </div>
    </div>
</div>

<!-- Location and Additional Info -->
<div class="card location-card">
    <h3>üìç Combat Details</h3>
    <div class="location-grid">
        <div class="location-info">
            <h5>System:</h5>
            <p>{{killmail.victim.location.system}}</p>
        </div>
        <div class="location-info">
            <h5>Region:</h5>
            <p>{{killmail.victim.location.region}}</p>
        </div>
        <div class="location-info">
            <h5>Time:</h5>
            <p>{{formatDate killmail.timestamp}}</p>
        </div>
        <div class="location-info">
            <h5>Attackers:</h5>
            <p>{{killmail.attackers.length}} pilots involved</p>
        </div>
    </div>
</div>

<!-- Action Buttons -->
<div class="actions">
    <a href="/killmails" class="btn">‚Üê Back to Killmails</a>
    <a href="/api/killmails/{{killmail.id}}" class="btn" target="_blank">View JSON Data</a>
</div>

<style>
.killmail-header {
    text-align: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid #ffd700;
}

.killmail-header h1 {
    color: #ffd700;
    margin-bottom: 0.5rem;
}

.killmail-meta {
    color: #ccc;
    font-size: 1.1rem;
}

.killmail-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 2rem;
    margin-bottom: 2rem;
}

.victim-card {
    border-left: 4px solid #f44336;
}

.attackers-card {
    border-left: 4px solid #ff9800;
}

.location-card {
    border-left: 4px solid #2196f3;
}

.pilot-info h4 {
    margin-bottom: 0.25rem;
}

.pilot-info p {
    margin-bottom: 1rem;
}

.ship-info, .loss-value {
    margin-top: 1rem;
}

.ship-info h5, .loss-value h5 {
    margin-bottom: 0.25rem;
    color: #ffd700;
}

.attackers-list {
    max-height: 400px;
    overflow-y: auto;
}

.attacker-item {
    padding: 1rem;
    margin-bottom: 0.5rem;
    background: rgba(255, 255, 255, 0.02);
    border-radius: 4px;
    border-left: 3px solid transparent;
}

.attacker-item.final-blow {
    border-left-color: #ff5722;
    background: rgba(255, 87, 34, 0.1);
}

.attacker-info {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.25rem;
}

.final-blow-badge {
    background: #ff5722;
    color: white;
    padding: 0.125rem 0.5rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: bold;
}

.attacker-ship {
    font-size: 0.9rem;
    color: #ccc;
}

.location-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
}

.location-info h5 {
    color: #ffd700;
    margin-bottom: 0.25rem;
}

.actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
    margin-top: 2rem;
}

@media (max-width: 768px) {
    .killmail-grid {
        grid-template-columns: 1fr;
    }

    .location-grid {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    }

    .actions {
        flex-direction: column;
        align-items: center;
    }

    .attacker-info {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.25rem;
    }
}
</style>
