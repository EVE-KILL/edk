<!-- 500 Error Page - EDK Style -->
<div class="killlist" style="max-width: 800px; margin: 20px auto;">
    <div class="kb-losses-header">500 - Internal Server Error</div>

    <table class="kb-table" cellspacing="1" style="width: 100%;">
        <tr class="kb-table-header">
            <td class="kb-table-header">
                <span style="font-size: 14px;">⚠️ Something went wrong on our end</span>
            </td>
        </tr>
        <tr class="kb-table-row-even">
            <td class="kb-table-cell" style="padding: 20px;">
                <p style="font-size: 12px; color: #dfdfdf; margin-bottom: 15px;">
                    {{#if message}}
                        <strong>Error:</strong> {{message}}
                    {{else}}
                        An unexpected error occurred while processing your request.
                    {{/if}}
                </p>
                {{#unless isDevelopment}}
                <p style="font-size: 11px; color: #999;">
                    We've been notified and are working to fix this issue. Please try again later.
                </p>
                {{/unless}}
            </td>
        </tr>

        {{#if isDevelopment}}
        {{#if stack}}
        <tr class="kb-table-row-odd">
            <td class="kb-table-cell" style="padding: 15px;">
                <div style="font-size: 11px;">
                    <strong style="color: #ffd700;">Development Mode - Stack Trace:</strong>
                    <pre style="background-color: #1a1a1a; padding: 10px; margin-top: 10px; overflow-x: auto; font-size: 10px; color: #f55;">{{stack}}</pre>
                </div>
            </td>
        </tr>
        {{/if}}
        {{#if path}}
        <tr class="kb-table-row-even">
            <td class="kb-table-cell" style="padding: 10px; font-size: 10px;">
                <strong>Path:</strong> {{path}}<br>
                <strong>Method:</strong> {{method}}<br>
                <strong>Timestamp:</strong> {{timestamp}}
            </td>
        </tr>
        {{/if}}
        {{/if}}

        <tr class="kb-table-row-{{#if isDevelopment}}odd{{else}}even{{/if}}">
            <td class="kb-table-cell" style="padding: 15px; text-align: center;">
                <a href="/" style="color: #9bb3e8; font-size: 11px; margin-right: 15px;">← Back to Home</a>
                <a href="javascript:history.back()" style="color: #9bb3e8; font-size: 11px; margin-right: 15px;">Go Back</a>
                <a href="/api/health" style="color: #9bb3e8; font-size: 11px;">Check API Health</a>
            </td>
        </tr>
    </table>
</div>
