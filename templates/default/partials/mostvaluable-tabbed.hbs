{{#if mostValuableKills}}
<div style="background: var(--color-bg-tertiary); border: 1px solid var(--color-border-dark); border-radius: var(--radius-sm); margin-bottom: 20px; overflow: visible; position: relative;">
    <div style="padding: 12px 16px; border-bottom: 1px solid var(--color-border-dark); display: flex; justify-content: space-between; align-items: center;">
        <div style="color: var(--color-text-white); font-weight: 600; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px;">
            Most Valuable Kills {{#if timeRange}}({{timeRange}}){{else}}(All Time){{/if}}
        </div>
        <div style="display: flex; gap: 4px;">
            <button onclick="switchMostValuableTab('all')" id="tab-all" style="padding: 4px 10px; font-size: 10px; font-weight: 600; background: var(--color-accent-blue); color: var(--color-text-white); border: 1px solid var(--color-accent-blue-light); border-radius: var(--radius-xs); cursor: pointer; transition: all 0.2s;">
                All
            </button>
            <button onclick="switchMostValuableTab('ships')" id="tab-ships" style="padding: 4px 10px; font-size: 10px; font-weight: 600; background: transparent; color: var(--color-text-secondary); border: 1px solid var(--color-border-dark); border-radius: var(--radius-xs); cursor: pointer; transition: all 0.2s;">
                Ships
            </button>
            <button onclick="switchMostValuableTab('structures')" id="tab-structures" style="padding: 4px 10px; font-size: 10px; font-weight: 600; background: transparent; color: var(--color-text-secondary); border: 1px solid var(--color-border-dark); border-radius: var(--radius-xs); cursor: pointer; transition: all 0.2s;">
                Structures
            </button>
        </div>
    </div>

    <!-- All Kills Tab -->
    <div id="content-all" style="display: block;">
        {{#if mostValuableKills.length}}
        <div style="padding: 8px 12px;">
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 12px; width: 100%;">
                {{#each mostValuableKills}}
                {{> partials/mostvaluable-card this}}
                {{/each}}
            </div>
        </div>
        {{else}}
        <div style="padding: 40px 20px; text-align: center; color: var(--color-text-secondary); font-size: 11px;">
            No valuable kills found.
        </div>
        {{/if}}
    </div>

    <!-- Ships Tab -->
    <div id="content-ships" style="display: none;">
        {{#if mostValuableShips.length}}
        <div style="padding: 8px 12px;">
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 12px; width: 100%;">
                {{#each mostValuableShips}}
                {{> partials/mostvaluable-card this}}
                {{/each}}
            </div>
        </div>
        {{else}}
        <div style="padding: 40px 20px; text-align: center; color: var(--color-text-secondary); font-size: 11px;">
            No valuable ship kills found.
        </div>
        {{/if}}
    </div>

    <!-- Structures Tab -->
    <div id="content-structures" style="display: none;">
        {{#if mostValuableStructures.length}}
        <div style="padding: 8px 12px;">
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 12px; width: 100%;">
                {{#each mostValuableStructures}}
                {{> partials/mostvaluable-card this}}
                {{/each}}
            </div>
        </div>
        {{else}}
        <div style="padding: 40px 20px; text-align: center; color: var(--color-text-secondary); font-size: 11px;">
            No valuable structure kills found.
        </div>
        {{/if}}
    </div>
</div>

<script>
function switchMostValuableTab(tab) {
    // Hide all content
    document.getElementById('content-all').style.display = 'none';
    document.getElementById('content-ships').style.display = 'none';
    document.getElementById('content-structures').style.display = 'none';
    
    // Reset all button styles
    const buttons = ['tab-all', 'tab-ships', 'tab-structures'];
    buttons.forEach(id => {
        const btn = document.getElementById(id);
        btn.style.background = 'transparent';
        btn.style.color = 'var(--color-text-secondary)';
        btn.style.borderColor = 'var(--color-border-dark)';
    });
    
    // Show selected content and highlight button
    document.getElementById('content-' + tab).style.display = 'block';
    const activeBtn = document.getElementById('tab-' + tab);
    activeBtn.style.background = 'var(--color-accent-blue)';
    activeBtn.style.color = 'var(--color-text-white)';
    activeBtn.style.borderColor = 'var(--color-accent-blue-light)';
}
</script>
{{/if}}
