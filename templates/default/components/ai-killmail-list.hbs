<!-- Killmail List Component for AI Responses -->
{{#if killmails}}
  <div style="margin-bottom: 10px; color: #999;">
    Found {{formatNumber killmails.length}} killmail{{#if (gt killmails.length 1)}}s{{/if}}
  </div>

  <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 12px; max-width: calc(5 * 140px + 4 * 12px);">
    {{#each killmails}}
      <div style="width: 100%; max-width: 140px; cursor: pointer; display: flex; flex-direction: column; background: rgba(0, 0, 0, 0.2); border: 1px solid var(--color-border-dark); border-radius: var(--radius-sm); overflow: hidden; transition: all 0.2s ease;" onclick="window.location.href='/killmail/{{this.killmailId}}';" onmouseover="this.style.borderColor='var(--color-accent-blue-light)'; this.style.boxShadow='0 0 8px rgba(74, 158, 255, 0.3)';" onmouseout="this.style.borderColor='var(--color-border-dark)'; this.style.boxShadow='none';">
        <div style="position: relative; width: 100%; height: 140px; background: linear-gradient(135deg, rgba(74, 158, 255, 0.1), rgba(74, 158, 255, 0.05)); display: flex; align-items: center; justify-content: center; overflow: hidden;">
          <div style="position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;">
            {{> partials/eve-image type="ship" id=victim.ship.typeId size=256 alt=victim.ship.name style="width: 100%; height: 100%; object-fit: contain;"}}
          </div>
          <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(to top, rgba(0, 0, 0, 0.85), transparent); padding: 4px 8px 3px 8px; font-size: 9px; font-weight: 600; color: var(--color-text-white); text-overflow: ellipsis; white-space: nowrap; overflow: hidden;">
            {{victim.ship.name}}
          </div>
          <div style="position: absolute; top: 6px; right: 6px; background: rgba(0,0,0,0.6); padding: 4px 6px; border-radius: 4px; font-size: 9px; color: #4ade80;">
            {{abbreviateISK totalValue}}
          </div>
        </div>

        <div style="padding: 10px 12px; display: flex; flex-direction: column; gap: 6px; flex: 1;">
          <div style="display: flex; align-items: center; gap: 6px; color: #999; font-size: 10px;">
            <span style="color: #666;">{{killmailTimeRelative}}</span>
          </div>

          <div style="display: flex; flex-direction: column; gap: 4px; color: var(--color-text-secondary); font-size: 11px; line-height: 1.3;">
            <div style="display:flex; flex-direction:column; gap:2px;">
              <div><span style="color:#666;">Victim:</span>
                {{#if victim.character.id}}
                  <a href="/character/{{victim.character.id}}" style="color: #4a9eff; text-decoration: none;" onclick="event.stopPropagation();">
                    {{victim.character.name}}
                  </a>
                {{else}}
                  <span style="color: var(--color-text-secondary);">{{victim.character.name}}</span>
                {{/if}}
              </div>
              {{#if victim.corporation.name}}
                <div><span style="color:#666;">Corp:</span>
                  {{#if victim.corporation.id}}
                    <a href="/corporation/{{victim.corporation.id}}" style="color: var(--color-text-secondary); text-decoration: none;" onclick="event.stopPropagation();">
                      {{victim.corporation.name}}
                    </a>
                  {{else}}
                    <span style="color: var(--color-text-secondary);">{{victim.corporation.name}}</span>
                  {{/if}}
                </div>
              {{/if}}
              {{#if victim.alliance.name}}
                <div><span style="color:#666;">Alliance:</span>
                  {{#if victim.alliance.id}}
                    <a href="/alliance/{{victim.alliance.id}}" style="color: var(--color-text-secondary); text-decoration: none;" onclick="event.stopPropagation();">
                      {{victim.alliance.name}}
                    </a>
                  {{else}}
                    <span style="color: var(--color-text-secondary);">{{victim.alliance.name}}</span>
                  {{/if}}
                </div>
              {{/if}}
            </div>
            <div>
              <span style="color: #666;">System:</span>
              {{#if solarSystem.id}}
                <a href="/system/{{solarSystem.id}}" style="color: var(--color-text-secondary); text-decoration: none;" onclick="event.stopPropagation();">
                  {{solarSystem.name}}
                </a>
              {{else}}
                <span style="color: var(--color-text-secondary);">{{solarSystem.name}}</span>
              {{/if}}
            </div>
          </div>
        </div>
      </div>
    {{/each}}
  </div>
{{else}}
  <div style="color: #999; text-align: center; padding: 20px;">
    No killmails found matching your query.
  </div>
{{/if}}
