<!-- Home Page - EDK Style -->

{{#if summaryTable}}
<!-- Summary Table -->
<div class="mb-lg">
    {{{summaryTable}}}
</div>
{{/if}}

<!-- Statistics Section -->
{{#if statistics}}
<section class="section mb-lg">
    <div style="background: var(--color-bg-tertiary); border: 1px solid var(--color-border-dark); border-radius: 4px; margin-bottom: 20px; overflow: visible; position: relative;">
        <!-- Header -->
        <div style="padding: 12px 16px; border-bottom: 1px solid var(--color-border-dark);">
            <div style="color: var(--color-text-white); font-weight: 600; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px;">
                Killboard Statistics
            </div>
        </div>

        <!-- Compact Content Grid -->
        <div style="padding: 12px 16px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
            <!-- Overall Stats -->
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">Total Killmails</span>
                <span style="color: var(--color-text-white); font-size: 13px; font-weight: 600;">{{statistics.totalKillmails}}</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">Total ISK</span>
                <span style="color: #4ade80; font-size: 13px; font-weight: 600;">{{formatISK statistics.totalISKDestroyed}}</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">Solo Kills</span>
                <span style="color: var(--color-text-white); font-size: 13px; font-weight: 600;">{{statistics.soloKills}}</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">NPC Kills</span>
                <span style="color: var(--color-text-white); font-size: 13px; font-weight: 600;">{{statistics.npcKills}}</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">Avg Attackers</span>
                <span style="color: var(--color-text-white); font-size: 13px; font-weight: 600;">{{statistics.averageAttackersPerKill}}</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">Unique Pilots</span>
                <span style="color: var(--color-text-white); font-size: 13px; font-weight: 600;">{{statistics.totalUniquePilots}}</span>
            </div>

            <!-- Activity Stats -->
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">Pilots (24h)</span>
                <span style="color: var(--color-text-white); font-size: 13px; font-weight: 600;">{{statistics.activePilotsLast24Hours}}</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">Pilots (7d)</span>
                <span style="color: var(--color-text-white); font-size: 13px; font-weight: 600;">{{statistics.activePilotsLast7Days}}</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">Kills (24h)</span>
                <span style="color: var(--color-text-white); font-size: 13px; font-weight: 600;">{{statistics.killsLast24Hours}}</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">Kills (7d)</span>
                <span style="color: var(--color-text-white); font-size: 13px; font-weight: 600;">{{statistics.killsLast7Days}}</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">Kills (30d)</span>
                <span style="color: var(--color-text-white); font-size: 13px; font-weight: 600;">{{statistics.killsLast30Days}}</span>
            </div>

            <!-- Top Entities -->
            {{#if statistics.topKiller}}
            <div style="display: flex; justify-content: space-between; align-items: center; gap: 8px;">
                <div style="display: flex; flex-direction: column; gap: 1px; min-width: 0;">
                    <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">Top Killer</span>
                    <a href="/character/{{statistics.topKiller.id}}" style="color: var(--color-accent-blue-light); text-decoration: none; font-size: 10px; font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">{{statistics.topKiller.name}}</a>
                </div>
                <span style="color: var(--color-text-white); font-size: 11px; font-weight: 600; flex-shrink: 0;">{{statistics.topKiller.kills}}</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; gap: 8px;">
                <div style="display: flex; flex-direction: column; gap: 1px; min-width: 0;">
                    <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">Top Corp</span>
                    <a href="/corporation/{{statistics.topCorporation.id}}" style="color: var(--color-accent-blue-light); text-decoration: none; font-size: 10px; font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">{{statistics.topCorporation.name}}</a>
                </div>
                <span style="color: var(--color-text-white); font-size: 11px; font-weight: 600; flex-shrink: 0;">{{statistics.topCorporation.kills}}</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; gap: 8px;">
                <div style="display: flex; flex-direction: column; gap: 1px; min-width: 0;">
                    <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">Top Alliance</span>
                    <a href="/alliance/{{statistics.topAlliance.id}}" style="color: var(--color-accent-blue-light); text-decoration: none; font-size: 10px; font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">{{statistics.topAlliance.name}}</a>
                </div>
                <span style="color: var(--color-text-white); font-size: 11px; font-weight: 600; flex-shrink: 0;">{{statistics.topAlliance.kills}}</span>
            </div>

            <!-- Ships & Systems -->
            {{#if statistics.mostDestroyedShip}}
            <div style="display: flex; justify-content: space-between; align-items: center; gap: 8px;">
                <div style="display: flex; flex-direction: column; gap: 1px; min-width: 0;">
                    <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">Most Destroyed</span>
                    <a href="/type/{{statistics.mostDestroyedShip.id}}" style="color: var(--color-accent-blue-light); text-decoration: none; font-size: 10px; font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">{{statistics.mostDestroyedShip.name}}</a>
                </div>
                <span style="color: var(--color-text-white); font-size: 11px; font-weight: 600; flex-shrink: 0;">{{statistics.mostDestroyedShip.count}}x</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; gap: 8px;">
                <div style="display: flex; flex-direction: column; gap: 1px; min-width: 0;">
                    <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">Most Used</span>
                    <a href="/type/{{statistics.mostUsedShip.id}}" style="color: var(--color-accent-blue-light); text-decoration: none; font-size: 10px; font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">{{statistics.mostUsedShip.name}}</a>
                </div>
                <span style="color: var(--color-text-white); font-size: 11px; font-weight: 600; flex-shrink: 0;">{{statistics.mostUsedShip.count}}x</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; gap: 8px;">
                <div style="display: flex; flex-direction: column; gap: 1px; min-width: 0;">
                    <span style="color: var(--color-text-secondary); font-size: 8px; font-weight: 600; text-transform: uppercase;">Most Dangerous</span>
                    <a href="/system/{{statistics.mostDangerousSystem.id}}" style="color: var(--color-accent-blue-light); text-decoration: none; font-size: 10px; font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">{{statistics.mostDangerousSystem.name}}</a>
                </div>
                <span style="color: var(--color-text-white); font-size: 11px; font-weight: 600; flex-shrink: 0;">{{statistics.mostDangerousSystem.count}}</span>
            </div>
            {{/if}}
            {{/if}}
        </div>
    </div>
</section>
{{/if}}

<!-- Most Valuable Kills -->
{{> partials/mostvaluable mostValuableKills=mostValuableKills timeRange="All Time"}}

<!-- Top 10 Stats (Last 7 Days) -->
{{#if top10Stats}}
<div style="display: grid; grid-template-columns: 20% 80%; gap: 5px; width: 100%; box-sizing: border-box;">
  <aside>
    {{> components/top-10-stats top10Stats=top10Stats}}
  </aside>

  <!-- Recent Killmails -->
  <section>
      <!-- Pagination Top -->
      {{> partials/pagination pagination=pagination}}

      {{> partials/killmail-list killmails=killmails}}

      <!-- Pagination Bottom -->
      {{> partials/pagination pagination=pagination}}
  </section>
</div>
{{else}}
<!-- Recent Killmails (no top 10) -->
<section class="killlist">
    <!-- Pagination Top -->
    {{> partials/pagination pagination=pagination}}

    {{> partials/killmail-list killmails=killmails}}

    <!-- Pagination Bottom -->
    {{> partials/pagination pagination=pagination}}
</section>
{{/if}}

<!-- Top Pilots / Top Corps (if available) -->
{{#if topPilots}}
<section class="mt-xl">
    {{> components/section-header title="Top Killers" icon="kills"}}

    <table class="kb-table" cellspacing="1">
        <tr class="kb-table-header">
            <td class="kb-table-header text-left">Pilot</td>
            <td class="kb-table-header text-center" style="width: 80px;">Kills</td>
            <td class="kb-table-header text-right" style="width: 150px;">ISK Destroyed</td>
        </tr>

        {{#each topPilots}}
        <tr class="{{#if (mod @index 2)}}kb-table-row-odd{{else}}kb-table-row-even{{/if}}">
            <td class="kb-table-cell">
                <b>{{name}}</b>
                <br />
                <span class="color-secondary" style="font-size: 9px;">{{corporation}}</span>
            </td>
            <td class="kb-table-cell kl-kill text-center">{{kills}}</td>
            <td class="kb-table-cell text-right">
                <span class="isk-value">{{formatISK isk}}</span>
            </td>
        </tr>
        {{/each}}
    </table>
</section>
{{/if}}


